{"version":3,"sources":["webpack:///C:/uniapp/lakehead-fronend/components/poiuy-uImgUpload/imgUpload.vue?5f70","webpack:///C:/uniapp/lakehead-fronend/components/poiuy-uImgUpload/imgUpload.vue?cd5c","webpack:///C:/uniapp/lakehead-fronend/components/poiuy-uImgUpload/imgUpload.vue?1acb","webpack:///C:/uniapp/lakehead-fronend/components/poiuy-uImgUpload/imgUpload.vue?1fc7","webpack:///C:/uniapp/lakehead-fronend/components/poiuy-uImgUpload/imgUpload.vue","webpack:///C:/uniapp/lakehead-fronend/components/poiuy-uImgUpload/imgUpload.vue?1a23","webpack:///C:/uniapp/lakehead-fronend/components/poiuy-uImgUpload/imgUpload.vue?8b0f"],"names":["name","props","imgArr","type","Array","uploadImgCount","String","default","imgCount","imgSize","Number","imgType","closeTip","Boolean","closeLoading","data","imgArray","canUpCount","startUpload","created","watch","n","o","methods","upPhoto","that","length","uni","showActionSheet","itemList","success","res","tapIndex","chooseImage","count","sizeType","sourceType","tempFiles","item","size","showToast","title","icon","r","some","v","split","tempFilePaths","fail","console","log","errMsg","preview","url","index","previewImage","urls","delImg","i","_this","showModal","content","confirm","splice","cancel","sleep","start","Date","getTime","upload","item_id","callback","successNum","urlArr","uploadImg","code","push","message","result","msg","urlArray","uploadFile","header","Authorization","getStorageSync","filePath","formData","itemId","uploadFileRes","JSON","parse","e","localUrl","reason"],"mappings":"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","file":"components/poiuy-uImgUpload/imgUpload.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./imgUpload.vue?vue&type=template&id=87a27502&scoped=true&\"\nvar renderjs\nimport script from \"./imgUpload.vue?vue&type=script&lang=js&\"\nexport * from \"./imgUpload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./imgUpload.vue?vue&type=style&index=0&id=87a27502&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"87a27502\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uniapp/lakehead-fronend/components/poiuy-uImgUpload/imgUpload.vue\"\nexport default component.exports","export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imgUpload.vue?vue&type=template&id=87a27502&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imgUpload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imgUpload.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//import $config from \"@/appConfig.js\"; //调用url前缀 *注意修改为自己的！！！\nexport default {\n\tname: 'imgUpload',\n\tprops: {\n\t\timgArr: { //图片数组\n\t\t\ttype: [Array],\n\t\t},\n\t\tuploadImgCount: { //一次上传图片数\n\t\t\ttype: String,\n\t\t\tdefault: '3'\n\t\t},\n\t\timgCount: { //可上传图片总数\n\t\t\ttype: String,\n\t\t\tdefault: '3'\n\t\t},\n\t\timgSize: { //图片大小 单位M\n\t\t\ttype: Number,\n\t\t\tdefault: 4\n\t\t},\n\t\timgType: {  //如果是小程序，这个值则没用作用\n\t\t\ttype: [Array],\n\t\t\tdefault: function() {\n\t\t\t\treturn ['jpeg', 'png', 'jpg']\n\t\t\t}\n\t\t},\n\t\tcloseTip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tcloseLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\timgArray: [],\n\t\t\tcanUpCount:'',\n\t\t\tstartUpload:false,\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.imgArray = this.imgArr;\n\t\tthis.canUpCount = Number(this.uploadImgCount);\n\t},\n\twatch: {\n\t\timgArr(n,o){\n\t\t\tthis.imgArray = n;\n\t\t},\n\t},\n\tmethods: {\n\t\t/* 一次上传一张或者多张图片 */\n\t\tupPhoto() {\n\t\t\tlet that = this;\n\t\t\tif (Number(that.imgCount - that.imgArray.length) < Number(that.uploadImgCount)) {\n\t\t\t\tthat.canUpCount = Number(that.imgCount - that.imgArray.length);\n\t\t\t}\n\t\t\tuni.showActionSheet({\n\t\t\t\titemList: ['拍照上传', '从相册中选择'],\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.tapIndex == 0) {\n\t\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\t\tcount: Number(that.canUpCount),\n\t\t\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\t\t\t\tsourceType: ['camera'], //从相册选择\n\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\t\tif (res.tempFiles) {\n\t\t\t\t\t\t\t\t\t\tfor (let item of res.tempFiles) {\n\t\t\t\t\t\t\t\t\t\t\tif (item.size > (that.imgSize * 1024 * 1024)) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: `图片不能大于${that.imgSize}M`,\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tif(item.type){\n\t\t\t\t\t\t\t\t\t\t\t\tlet r = that.imgType.some(v => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet type = item.type.split('/');\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (type.length)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (v === type[1]);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tif (!r) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: `只允许上传${that.imgType}的类型`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthat.imgArray = [...that.imgArray, ...res.tempFilePaths];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (res.tapIndex == 1) {\n\t\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\t\tcount: Number(that.canUpCount),\n\t\t\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\t\t\t\tsourceType: ['album'], //从相册选择\n\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\t\tif (res.tempFiles) {\n\t\t\t\t\t\t\t\t\t\tfor (let item of res.tempFiles) {\n\t\t\t\t\t\t\t\t\t\t\tif (item.size > (that.imgSize * 1024 * 1024)) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: `图片不能大于${that.imgSize}M`,\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tif(item.type){\n\t\t\t\t\t\t\t\t\t\t\t\tlet r = that.imgType.some(v => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet type = item.type.split('/');\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (type.length)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (v === type[1]);\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tif (!r) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: `只允许上传${that.imgType}的类型`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tthat.imgArray = [...that.imgArray, ...res.tempFilePaths];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: function(res) {\n\t\t\t\t\tconsole.log(res.errMsg);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tpreview(url, index) {\n\t\t\t// 预览图片\n\t\t\tuni.previewImage({\n\t\t\t\turls: [url]\n\t\t\t});\n\t\t},\n\t\tdelImg(i) {\n\t\t\tconst _this = this;\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '是否删除这张照片？',\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t_this.imgArray.splice(i, 1);\n\t\t\t\t\t} else if (res.cancel) {}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tsleep(n) {\n\t\t\tvar start = new Date().getTime();\n\t\t\t//  console.log('休眠前：' + start);\n\t\t\twhile (true) {\n\t\t\t\tif (new Date().getTime() - start > n) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t// console.log('休眠后：' + new Date().getTime());\n\t\t},\n\n\t\tupload(item_id, callback) {\n\t\t\tconsole.log(\"itemid: \" + item_id)\n\t\t\tconst _this = this;\n\t\t\tconsole.log(_this.imgArray.length);\n\t\t\tif (_this.imgArray.length) {\n\t\t\t\tthis.startUpload=true;\n\t\t\t\tlet successNum = 0;\n\t\t\t\tlet urlArr = [];\n\t\t\t\tfor (let item of _this.imgArray) {\n\t\t\t\t\tconsole.log(item);\n\t\t\t\t\tthis.sleep(1000);\n\t\t\t\t\t_this.uploadImg(item, item_id, res => {\n\t\t\t\t\t\tif (res.code == 0) {\n\t\t\t\t\t\t\tsuccessNum++;\n\t\t\t\t\t\t\turlArr.push(res.message);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turlArr.push(res.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (urlArr.length == _this.imgArray.length) {\n\t\t\t\t\t\t\tif(successNum>0){\n\t\t\t\t\t\t\t\tthis.startUpload=false;\n\t\t\t\t\t\t\t\t_this.imgArray = [];\n\t\t\t\t\t\t\t\tcallback(_this.result(urlArr, successNum));\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.startUpload=false;\n\t\t\t\t\t\t\t\tcallback(urlArr); //错误的返回\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcallback({\n\t\t\t\t\tresult: 'warning',\n\t\t\t\t\tcode: 400,\n\t\t\t\t\tmsg: '请先上传图片！'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tresult(urlArr, successNum) {\n\t\t\tlet result = {\n\t\t\t\tresult: 'success',\n\t\t\t\tcode: 0,\n\t\t\t\turlArray: urlArr,\n\t\t\t\tsuccess: successNum\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\n\t\tuploadImg(item, item_id, callback) {\n\t\t\tconsole.log(\"upload img with item_id: \" + item);\n\t\t\tconst _this = this;\n\t\t\tuni.uploadFile({\n\t\t\t\theader: {Authorization: \"Bearer \" + uni.getStorageSync(\"jwt\")},\n\t\t\t\turl:'http://3.96.104.51:53020/s3/item', //需传后台图片上传接口\n\t\t\t\tfilePath: item,\n\t\t\t\tname: \"multipartFile\",\n\t\t\t\tformData: {itemId: item_id},\n\t\t\t\tsuccess: (uploadFileRes) => {\n\t\t\t\t\tif (uploadFileRes) {\n\t\t\t\t\t\tlet res = JSON.parse(uploadFileRes.data);\n\t\t\t\t\t\tcallback(res);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail:(e)=>{\n\t\t\t\t\tcallback({\n\t\t\t\t\t\tcode:500,\n\t\t\t\t\t\tmsg:'图片上传失败',\n\t\t\t\t\t\tlocalUrl:item,\n\t\t\t\t\t\treason:e\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imgUpload.vue?vue&type=style&index=0&id=87a27502&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./imgUpload.vue?vue&type=style&index=0&id=87a27502&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1595810934745\n      var cssReload = require(\"C:/software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}