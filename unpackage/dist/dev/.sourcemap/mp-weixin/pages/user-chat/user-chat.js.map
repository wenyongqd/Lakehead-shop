{"version":3,"sources":["webpack:///C:/uniapp/lakehead-fronend/main.js","webpack:///C:/uniapp/lakehead-fronend/pages/user-chat/user-chat.vue?67c4","webpack:///C:/uniapp/lakehead-fronend/pages/user-chat/user-chat.vue?21ba","webpack:///C:/uniapp/lakehead-fronend/pages/user-chat/user-chat.vue?ab61","webpack:///C:/uniapp/lakehead-fronend/pages/user-chat/user-chat.vue?d004","webpack:///C:/uniapp/lakehead-fronend/pages/user-chat/user-chat.vue"],"names":["createPage","Page","components","userChatList","bottomInput","data","scrollInto","list","onReady","pageToBottom","beforeDestroy","$store","commit","uni","$off","methods","renderPage","e","dispatch","then","msg","push","submit","type","result","$H","post","token","res","send","setTimeout","lastIndex","length"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,uG;AACAA,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AAC4K;AAC5K,gBAAgB,sLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAmpB,CAAgB,gqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiCxpB;AACdC,YAAU,EAAE;AACXC,gBAAY,EAAZA,YADW;AAEXC,eAAW,EAAXA,WAFW,EADE;;AAKdC,MALc,kBAKP;AACN,WAAO;AACNC,gBAAU,EAAC,EADL;AAENC,UAAI,EAAC,EAFC,EAAP;;AAIA,GAVa;AAWd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,SA1Cc,qBA0CJ;AACT,SAAKC,YAAL;AACA,GA5Ca;AA6Cd;AACAC,eA9Cc,2BA8CE;AACf;AACA,SAAKC,MAAL,CAAYC,MAAZ,CAAmB,aAAnB;AACA;AACAC,OAAG,CAACC,IAAJ,CAAS,UAAT,EAAoB,YAAI,CAAE,CAA1B;AACA,GAnDa;AAoDdC,SAAO,EAAE;AACR;AACAC,cAFQ,sBAEGC,CAFH,EAEK;AACZ,WAAKN,MAAL,CAAYO,QAAZ,CAAqB,wBAArB,EAA8CD,CAA9C,EAAiDE,IAAjD,CAAsD,UAAAC,GAAG,EAAE;AAC1D,aAAI,CAACb,IAAL,CAAUc,IAAV,CAAeD,GAAf;AACA;AACA,aAAI,CAACX,YAAL;AACA,OAJD;AAKA,KARO;AASR;AACMa,UAVE,kBAUKjB,IAVL,EAUU;;AAEE,wBAAI,CAACM,MAAL,CAAYO,QAAZ,CAAqB,iBAArB,EAAuC;AACzDb,wBAAI,EAAJA,IADyD;AAEzDkB,wBAAI,EAAC,MAFoD,EAAvC,CAFF,SAEbC,MAFa;;AAMjB;AACA,sBAAI,CAACC,EAAL,CAAQC,IAAR,CAAa,YAAb,EAA0BF,MAA1B,EAAiC;AAChCG,uBAAK,EAAC,IAD0B,EAAjC;AAEGR,oBAFH,CAEQ,UAAAS,GAAG,EAAE;AACZ,wBAAI,CAACZ,UAAL,CAAgB;AACfX,wBAAI,EAACmB,MADU;AAEfK,wBAAI,EAAC,IAFU,EAAhB;;AAIA,iBAPD,EAPiB;AAejB,KAzBO;AA0BR;AACApB,gBA3BQ,0BA2BM;AACbqB,gBAAU,CAAC,YAAI;AACd,YAAIC,SAAS,GAAG,MAAI,CAACxB,IAAL,CAAUyB,MAAV,GAAmB,CAAnC;AACA,YAAID,SAAS,GAAG,CAAhB,EAAmB;AACnB,cAAI,CAACzB,UAAL,GAAkB,SAAOyB,SAAzB;AACA,OAJS,EAIR,GAJQ,CAAV;AAKA,KAjCO,EApDK,E","file":"pages/user-chat/user-chat.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user-chat/user-chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-chat.vue?vue&type=template&id=6b23f7bd&\"\nvar renderjs\nimport script from \"./user-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./user-chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uniapp/lakehead-fronend/pages/user-chat/user-chat.vue\"\nexport default component.exports","export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-chat.vue?vue&type=template&id=6b23f7bd&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-chat.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport userChatList from '@/components/user-chat/user-chat-list.vue';\nimport bottomInput from '@/components/common/bottom-input.vue';\nexport default {\n\tcomponents: {\n\t\tuserChatList,\n\t\tbottomInput\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tscrollInto:\"\",\n\t\t\tlist:[]\n\t\t}\n\t},\n\t// 页面加载前\n\t// onLoad(e) {\n\t// \tif(!e.user){\n\t// \t\tuni.navigateBack({\n\t// \t\t\tdelta: 1\n\t// \t\t});\n\t// \t\treturn uni.showToast({\n\t// \t\t\ttitle: '聊天对象不存在',\n\t// \t\t\ticon: 'none'\n\t// \t\t});\n\t// \t}\n\t// \tlet ToUser = JSON.parse(e.user)\n\t// \t// 创建聊天对象\n\t// \tthis.$store.commit('createToUser',ToUser)\n\t// \t// 获取当前聊天对象的聊天记录\n\t// \tthis.$store.dispatch('getChatDetailToUser').then(list=>{\n\t// \t\tconsole.log('[user-chat]获取当前聊天对象的聊天记录',list);\n\t// \t\tthis.list = list\n\t// \t})\n\t// \t// 开启监听接收聊天信息\n\t// \tuni.$on('UserChat',(res)=>{\n\t// \t\tconsole.log('[user-chat]接收聊天信息',res);\n\t// \t\tif(res.from_id === ToUser.user_id){\n\t// \t\t\tthis.renderPage({\n\t// \t\t\t\tdata:res,\n\t// \t\t\t\tsend:false\n\t// \t\t\t})\n\t// \t\t}\n\t// \t})\n\t// },\n\t// 页面加载完成的时候\n\tonReady() {\n\t\tthis.pageToBottom()\n\t},\n\t// 页面销毁前\n\tbeforeDestroy() {\n\t\t// 关闭聊天对象\n\t\tthis.$store.commit('closeToUser')\n\t\t// 移除监听聊天信息事件\n\t\tuni.$off('UserChat',()=>{})\n\t},\n\tmethods: {\n\t\t// 渲染到页面\n\t\trenderPage(e){\n\t\t\tthis.$store.dispatch('formatChatDetailObject',e).then(msg=>{\n\t\t\t\tthis.list.push(msg)\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.pageToBottom()\n\t\t\t})\n\t\t},\n\t\t// 发送\n\t\tasync submit(data){\n\t\t\t// 组织发送数据格式\n\t\t\tlet result = await this.$store.dispatch('sendChatMessage',{\n\t\t\t\tdata,\n\t\t\t\ttype:\"text\"\n\t\t\t})\n\t\t\t// 请求发送接口\n\t\t\tthis.$H.post('/chat/send',result,{\n\t\t\t\ttoken:true\n\t\t\t}).then(res=>{\n\t\t\t\tthis.renderPage({\n\t\t\t\t\tdata:result,\n\t\t\t\t\tsend:true\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\t// 滚动到底部\n\t\tpageToBottom(){\n\t\t\tsetTimeout(()=>{\n\t\t\t\tlet lastIndex = this.list.length - 1\n\t\t\t\tif (lastIndex < 0) return;\n\t\t\t\tthis.scrollInto = 'chat'+lastIndex\n\t\t\t},300)\n\t\t}\n\t}\n}\n"],"sourceRoot":""}